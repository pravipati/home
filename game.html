<html>
<head>
  <title>Space</title>
  <style type="text/css">
    .container {
      border-style: solid;
      border-color: black;
      border-width: 1px;
      position: absolute;
    }
    .circle {
      position: relative;
    }
    .rectangle {
      position: relative;
    }
  </style>
</head>
<body>
<div class="container">
  <!-- <circle cx="50" cy="50" r="10" stroke="black" stroke-width="1" fill="black" /> -->
</div>
</body>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script type="text/javascript">
  var gameOptions = {
    width: '300px',
    height: '300px'
  }
  var ship = {
    x: 0,
    bullet: {
      height: 5,
      width: 2
    }
  }
  d3.select('.container').append('svg:svg')
    .attr('height', gameOptions.height)
    .attr('width', gameOptions.width)
    .append('svg:circle') // add ship to svg element
    .attr('class', 'ship')
    .attr('r', 10)
    .attr('stroke', 'black')
    .attr('stroke-width', '1')
    .attr('fill', 'black')
    .attr('cy', gameOptions.height)
    .attr('cx', ship.x)

  //TODO: Give the ship SVG a centered position

  d3.select('body')
    .on('keydown', function(){
      var keyCode = d3.event.keyCode;
      if (keyCode === 32) {
        d3.select('.container').append('svg:rect')
        .attr('y', gameOptions.height)
        .attr('height', ship.bullet.height)
        .attr('width', ship.bullet.width)
        .attr('stroke', 'black')
        .attr('stroke-width', '1')
        .attr('fill', 'black')
        //TODO: on space event create a new bullet
        //Bullet should fire off
          //is there a buit in d3 way to transition? 
          //do I need to manually move the location of the bullet one unit at a time?
      }
      var direction = keyCode === 37 ? -7 : keyCode === 39 ? 7 : null;
      ship.x += direction;
      d3.select('.ship')
        .attr('cx', ship.x)
    })


</script>
</html>